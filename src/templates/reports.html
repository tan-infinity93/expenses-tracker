<!DOCTYPE html>
<html lang="en">
<head>
	<title>Reports</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<style type="text/css">
		body {
			background-color: grey;
		}
	</style>
</head>
<body>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
	<!-- Brand/logo -->
	<a class="navbar-brand" href="#">Flask Expenses</a>
	
	<!-- Links -->
	<ul class="navbar-nav">
		<li class="nav-item">
			<a class="nav-link" href="/expenses/v1/home">Home</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#">Reports</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#">About</a>
		</li>
	</ul>
</nav>

<div class="container-fluid">
	<br>
	<div class="row">
		<div class="col-sm-2"></div>
		<div class="col-sm-8">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>No</th>
						<th>Expense Type</th>
						<th>Expense Cost</th>
						<th>Timestamp</th>
					</tr>
				</thead>
				<tbody id="tbody"></tbody>
			</table>
		</div>
		<div class="col-sm-2"></div>
	</div>
</div>

</body>
<script type="text/javascript">
getReports = () => {
	const url = 'http://localhost:5000/expenses/v1/manage-get';

	axios.get(url)
	.then(function (response) {
		// handle success
		console.log(response['data']['expenses']);

		let expenses = response['data']['expenses'];
		let expensesHtml = '';
		
		for (var i = 0; i < expenses.length; i++) {
			expensesHtml += '<tr>';
			expensesHtml += '<td>'+(i+1)+'</td>';
			expensesHtml += '<td>'+expenses[i]['expense_type']+'</td>';
			expensesHtml += '<td>'+expenses[i]['expense_cost']+'</td>';
			expensesHtml += '<td>'+expenses[i]['timestamp']+'</td>';
			expensesHtml += '</tr>';
		}
		document.getElementById('tbody').innerHTML = expensesHtml;
	})
	.catch(function (error) {
		// handle error
		console.log(error);
	})
}

getReports();
</script>
</html>
